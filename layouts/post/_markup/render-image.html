
<figure class="img-wrapper ">
    {{ with .Title}}   <div class="title-img">{{ . }}</div> {{ end }}
    {{ $image := .Page.Resources.GetMatch .Destination }}
    
    {{ if gt $image.Width 780 }}
        {{ if hugo.IsExtended }} 
        <source srcset="{{ ($image.Resize "780x q95 webp" ).RelPermalink | safeURL }}" type="image/webp">
        {{ end }}
        {{ $image = $image.Resize "780x jpg" }}
        <source srcset="{{ $image.RelPermalink | safeURL }}" type="image/jpeg">
        {{ $image = $image.Resize "780x" }}
        <source srcset="{{ $image.RelPermalink | safeURL }}" type="{{$image.MediaType}}">
        
    {{ else}}
        {{ if hugo.IsExtended }} 
        <source srcset="{{ ($image.Resize "x500 q90 webp" ).RelPermalink | safeURL }}" type="image/webp">
        {{ end }}
        {{ $image = $image.Resize "x500 jpg" }}
        <source srcset="{{ $image.RelPermalink | safeURL }}" type="image/jpeg">
        {{ $image = $image.Resize "x500" }}
        <source srcset="{{ $image.RelPermalink | safeURL }}" type="{{$image.MediaType}}">
    {{ end }}

    
    {{ if gt $image.Width 780 }}
        {{ $image = $image.Resize "780x" }}
    {{ end }}
    <source srcset="{{ $image.RelPermalink | safeURL }}" type="{{$image.MediaType}}">

    <div class="container">
    <img 
    class="post-img" 
    src="{{ $image.RelPermalink | safeURL }}" 
    {{ with .Text}}  alt="{{ . }}" {{ end }} 
    {{ with .Title}} title="{{ . }}"{{ end }} 
    loading="lazy"
     width="{{$image.Width}}" 
     height="{{$image.Height}}"
     type="image/jpeg"
     />
     <a href="{{ .Destination | safeURL }}" target="_blank"  class="fullscreen-container" aria-label="Fullscreen image"> </a>
     
    {{ with .Text}}   <figcaption class="small"> {{ . }}</figcaption> {{ end }}
</div>
</figure>

